/* Zoom Prevention & Touch Action */
html { touch-action: manipulation; }
body { 
    background-color: #F2F2F7; 
    color: #1C1C1E; 
    -webkit-font-smoothing: antialiased; 
    overscroll-behavior-y: none;
    touch-action: pan-x pan-y; /* Allows scrolling but prevents zoom gestures */
}

::-webkit-scrollbar { width: 0px; background: transparent; } 

/* FIXED UNIFORM WIDTH FOR KANBAN COLUMNS */
.kanban-column { 
    min-width: 320px; 
    width: 320px; 
    max-width: 320px;
}

.glass { background-color: rgba(255, 255, 255, 0.85); backdrop-filter: saturate(180%) blur(20px); -webkit-backdrop-filter: saturate(180%) blur(20px); }

/* UNIFIED FORM STYLES - Matches Inputs & Dropdowns */
input:not([type="checkbox"]):not([type="radio"]):not([type="color"]):not([type="file"]), textarea, select { 
    appearance: none; -webkit-appearance: none; 
    background-color: #FFFFFF; 
    border: 1px solid #D1D5DB; /* border-gray-300 */
    border-radius: 0.75rem; /* rounded-xl */
    padding: 0.75rem 1.25rem; /* Fallback padding */
    font-size: 0.875rem; /* text-sm */
    line-height: 1.25rem;
    color: #1C1C1E; /* text-dark */
    width: 100%;
    transition: all 0.2s ease;
    box-sizing: border-box;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
}

textarea {
    resize: vertical; /* Ensure Trainers and other textareas are extendable */
    min-height: 80px;
}

/* Remove default arrow for inputs that are not selects */
input:not([type="checkbox"]):not([type="radio"]):not([type="color"]), textarea {
    background-image: none;
}

/* Focus States */
input:not([type="checkbox"]):not([type="color"]):focus, textarea:focus, select:focus { 
    outline: none; 
    border-color: #007AFF; 
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1); 
}

input[type="checkbox"] { accent-color: #007AFF; width: 1rem; height: 1rem; cursor: pointer; }

/* Progress Bar Styles */
.progress-segment { height: 4px; flex: 1; border-radius: 2px; background-color: #E5E5EA; transition: background-color 0.3s ease; }
.progress-segment.active-light { background-color: #dd5500; }
.progress-segment.active-solid { background-color: #008430; }

@media (max-width: 640px) {
    .kanban-column { min-width: 88vw; width: 88vw; max-width: 88vw; height: 72vh; }
    #main-content { padding: 0.5rem !important; }
    h1 { font-size: 1.5rem !important; }
    .kanban-card { cursor: default !important; }
    .kanban-card-header { cursor: pointer !important; } 
    #toolbar { padding: 0.75rem 1rem; -webkit-overflow-scrolling: touch; }
}

.kanban-card.dragging { opacity: 0.5; cursor: grabbing; transform: scale(1.02); }
.kanban-column-content.drag-over { background-color: rgba(0, 122, 255, 0.05); border-radius: 12px; box-shadow: inset 0 0 0 2px #007AFF; }
#loading-overlay { position: fixed; inset: 0; background: rgba(242, 242, 247, 0.95); z-index: 50; display: flex; justify-content: center; align-items: center; flex-direction: column; transition: opacity 0.3s; }

@keyframes slideUpFade { from { opacity: 0; transform: translate(-50%, 20px); } to { opacity: 1; transform: translate(-50%, 0); } }
.toast-enter { animation: slideUpFade 0.3s ease-out forwards; }

/* ALTERNATING ROWS FOR ZONES - BOTH MOBILE & DESKTOP */
#zones-body tr { transition: background-color 0.15s ease; }
/* Override striping with specific zone colors if applied */
#zones-body tr:not([class*="bg-zone-"]) {
    background-color: #FFFFFF;
}
#zones-body tr:not([class*="bg-zone-"]):nth-child(even) { background-color: #F9FAFB; } 


/* ZONE COLORS */
.bg-zone-east { background-color: #fefe99 !important; }
.bg-zone-north { background-color: #dafbd9 !important; }
.bg-zone-south { background-color: #9acbfc !important; }
.bg-zone-west { background-color: #cb98fe !important; }

/* MISMATCH HEADER */
.header-mismatch { background-color: #EF4444 !important; } /* Red-500 */

/* Desktop Hover */
@media (min-width: 641px) {
    .zone-row:hover { filter: brightness(0.95); } 
}
td { vertical-align: middle; }

/* TOGGLE SWITCH */
.toggle-checkbox:checked {
    right: 0;
    border-color: #00d24d;
}
.toggle-checkbox:checked + .toggle-label {
    background-color: #00d24d;
}
.color-input-wrapper input[type="color"] {
    border: none; width: 30px; height: 30px; padding: 0; overflow: hidden; border-radius: 50%; cursor: pointer;
}
.color-input-wrapper input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
.color-input-wrapper input[type="color"]::-webkit-color-swatch { border: none; }

/* SPREADSHEET TABLE STYLES (Advanced) */
.spreadsheet-cell {
    outline: none;
    cursor: cell; /* Crosshair cursor for sheet feel */
    transition: all 0.1s ease;
    user-select: none; /* Prevent native text highlight during range selection */
    position: relative;
}

/* Editing State (Double Click) */
.spreadsheet-cell.editing {
    background-color: #FFFFFF;
    box-shadow: inset 0 0 0 2px #007AFF;
    cursor: text;
    user-select: text;
    z-index: 20;
}

/* Selection State (Single Click / Drag) */
.spreadsheet-cell.selected {
    background-color: rgba(0, 122, 255, 0.15); /* Light Blue */
    border-color: rgba(0, 122, 255, 0.3);
}

/* Anchor cell (First clicked in a range) */
.spreadsheet-cell.active-anchor {
    background-color: #FFFFFF; /* Anchor usually stays white but has border */
    box-shadow: inset 0 0 0 2px #007AFF; 
    z-index: 10;
}

/* Ensure empty cells have height so they can be clicked */
.spreadsheet-cell:empty::before {
    content: '\00a0';
    display: inline-block;
}


/* APPOINTMENT DOT STYLES */
.appt-dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 6px;
    vertical-align: middle;
}

.appt-dot-future {
    background-color: #eaff00; /* Yellow-500 */
    box-shadow: 0 0 0 0 rgba(186, 174, 0, 0.7);
    animation: pulse-yellow 0.5s infinite;
}

.appt-dot-past {
    background-color: #F97316; /* Orange-500 */
}

@keyframes pulse-yellow {
    0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(186, 174, 0, 0.7); }
    70% { transform: scale(1); box-shadow: 0 0 0 6px rgba(186, 174, 0, 0); }
    100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(186, 174, 0, 0); }
}
